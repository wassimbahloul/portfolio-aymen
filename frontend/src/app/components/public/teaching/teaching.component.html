<div class="modern-teaching-container">
  <!-- Header Section -->
  <div class="teaching-header">
    <div class="container">
      <div class="header-content">
        <div class="header-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 14l9-5-9-5-9 5 9 5z"/>
            <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
          </svg>
        </div>
        <div class="header-text">
          <h1 class="page-title">Mathematical Teaching</h1>
          <p class="page-description">Courses and educational activities in mathematics and related fields</p>
        </div>
      </div>
    </div>
  </div>

  <div class="teaching-content" *ngIf="!loading">
    <div class="container">
      <!-- Filter Section -->
      <div class="filter-section" *ngIf="courses.length > 0">
        <div class="filter-header">
          <h2>Course Catalog</h2>
          <p>Filter by academic level and mathematical subject area</p>
        </div>
        
        <div class="filter-grid">
          <div class="filter-group">
            <label class="filter-label">Academic Level</label>
            <select class="modern-select" [(ngModel)]="selectedLevel" (change)="filterCourses()">
              <option value="">All Levels</option>
              <option value="undergraduate">Undergraduate</option>
              <option value="graduate">Graduate</option>
              <option value="phd">Doctoral</option>
              <option value="postdoc">Postdoctoral</option>
            </select>
          </div>

          <div class="filter-group">
            <label class="filter-label">Institution</label>
            <select class="modern-select" [(ngModel)]="selectedInstitution" (change)="filterCourses()">
              <option value="">All Institutions</option>
              <option *ngFor="let institution of institutions" [value]="institution">
                {{ institution }}
              </option>
            </select>
          </div>

          <div class="filter-group search-group">
            <label class="filter-label">Search Courses</label>
            <div class="search-input-wrapper">
              <input 
                type="text"
                class="search-input"
                [(ngModel)]="searchTerm" 
                (input)="filterCourses()" 
                placeholder="Search by title, subject, description...">
              <div class="search-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="m21 21-4.35-4.35"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Courses Grid -->
      <div class="courses-grid" *ngIf="filteredCourses.length > 0">
        <div class="course-card" *ngFor="let course of filteredCourses; let i = index">
          <div class="card-header">
            <div class="course-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 3h18v18H3zM12 8v8M8 12h8"/>
              </svg>
            </div>
            <div class="course-badges">
              <span class="level-badge" [ngClass]="'level-' + course.level">
                {{ getLevelLabel(course.level) }}
              </span>
            </div>
          </div>

          <div class="card-content">
            <h3 class="course-title">{{ course.title }}</h3>

            <div class="course-meta">
              <div class="course-institution" *ngIf="course.institution">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 21h18"/>
                  <path d="M5 21V7l8-4v18"/>
                  <path d="M19 21V11l-6-4"/>
                </svg>
                <span>{{ course.institution }}</span>
              </div>

              <div class="course-department" *ngIf="course.department">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                  <path d="M2 17l10 5 10-5"/>
                  <path d="M2 12l10 5 10-5"/>
                </svg>
                <span>{{ course.department }}</span>
              </div>

              <div class="course-period" *ngIf="course.semester || course.academicYear">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                  <line x1="16" y1="2" x2="16" y2="6"/>
                  <line x1="8" y1="2" x2="8" y2="6"/>
                  <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                <span>
                  <span *ngIf="course.semester">{{ getSemesterLabel(course.semester) }}</span>
              <span *ngIf="course.semester && course.academicYear"> - </span>
              <span *ngIf="course.academicYear">{{ course.academicYear }}</span>
            </span>
          </div>
        </div>

        <div class="course-description" *ngIf="course.description">
          <h4>Description</h4>
          <p [class.expanded]="expandedDescriptions[i]">{{ course.description }}</p>
          <button mat-button 
                  *ngIf="course.description.length > 300"
                  (click)="toggleDescription(i)">
            {{ expandedDescriptions[i] ? 'Show Less' : 'Show More' }}
          </button>
        </div>

        <!-- Course PDF Files -->
        <div class="course-files" *ngIf="course.files?.length">
          <h4><mat-icon>picture_as_pdf</mat-icon> PDF Documents</h4>
          <div class="files-list">
            <div class="file-item" *ngFor="let file of course.files">
              <div class="file-info">
                <div class="file-name">{{ file.name }}</div>
                <div class="file-date">{{ file.uploadedAt | date:'short' }}</div>
              </div>
              <a *ngIf="file.path" 
                 [href]="'https://portfolio-aymen.onrender.com' + file.path" 
                 target="_blank" 
                 mat-icon-button
                 matTooltip="Open PDF">
                <mat-icon>open_in_new</mat-icon>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- No Courses Message -->
    <div class="no-courses" *ngIf="filteredCourses.length === 0 && courses.length > 0">
      <mat-icon>search_off</mat-icon>
      <h3>No courses found</h3>
      <p>Try modifying your search criteria</p>
    </div>

    <div class="no-courses" *ngIf="courses.length === 0">
      <mat-icon>school</mat-icon>
      <h3>No courses available</h3>
      <p>Teaching activities will be displayed here once added</p>
    </div>
  </div>

  <!-- Loading indicator -->
  <div class="loading" *ngIf="loading">
    <mat-spinner></mat-spinner>
  </div>
</div>
