<div class="modern-research-container">
  <!-- Header Section -->
  <div class="research-header">
    <div class="container">
      <div class="header-content">
        <div class="header-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 11H1v6h8v-6zM23 11h-8v6h8v-6z"/>
            <path d="M15 7V1H9v6h6z"/>
            <circle cx="12" cy="12" r="10"/>
          </svg>
        </div>
        <div class="header-text">
          <h1 class="page-title">Mathematical Research</h1>
          <p class="page-description">Exploring the frontiers of mathematical knowledge through rigorous investigation</p>
        </div>
      </div>
    </div>
  </div>

  <div class="research-content" *ngIf="!loading">
    <div class="container">
      <!-- Filter Section -->
      <div class="filter-section" *ngIf="researchProjects.length > 0">
        <div class="filter-header">
          <h2>Research Areas</h2>
          <p>Filter by mathematical fields and research status</p>
        </div>
        
        <div class="filter-grid">
          <div class="filter-group">
            <label class="filter-label">Mathematical Field</label>
            <select class="modern-select" [(ngModel)]="selectedCategory" (change)="filterProjects()">
              <option value="">All Fields</option>
              <option value="analysis">Mathematical Analysis</option>
              <option value="algebra">Abstract Algebra</option>
              <option value="topology">Topology</option>
              <option value="geometry">Differential Geometry</option>
              <option value="logic">Mathematical Logic</option>
              <option value="probability">Probability Theory</option>
              <option value="applied">Applied Mathematics</option>
            </select>
          </div>

          <div class="filter-group">
            <label class="filter-label">Research Status</label>
            <select class="modern-select" [(ngModel)]="selectedStatus" (change)="filterProjects()">
              <option value="">All Status</option>
              <option value="ongoing">Active Research</option>
              <option value="completed">Completed</option>
              <option value="planned">Future Projects</option>
              <option value="collaboration">Collaborations</option>
            </select>
          </div>

          <div class="filter-group search-group">
            <label class="filter-label">Search Research</label>
            <div class="search-input-wrapper">
              <input 
                type="text"
                class="search-input"
                [(ngModel)]="searchTerm" 
                (input)="filterProjects()" 
                placeholder="Search by title, keywords, collaborators...">
              <div class="search-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="m21 21-4.35-4.35"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Research Projects Grid -->
      <div class="research-projects-grid" *ngIf="filteredProjects.length > 0">
        <div class="research-card" *ngFor="let project of filteredProjects; let i = index">
          <div class="card-header">
            <div class="project-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                <path d="M2 17l10 5 10-5"/>
                <path d="M2 12l10 5 10-5"/>
              </svg>
            </div>
            <div class="project-badges">
              <span class="category-badge" *ngIf="project.category">{{ project.category }}</span>
              <span class="status-badge" [ngClass]="'status-' + project.status">
                {{ getStatusLabel(project.status) }}
              </span>
            </div>
          </div>

          <div class="card-content">
            <h3 class="project-title">{{ project.title }}</h3>
            
            <div class="project-period" *ngIf="project.startDate || project.endDate">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              <span>
                {{ formatDate(project.startDate) }}
                <span *ngIf="project.endDate"> - {{ formatDate(project.endDate) }}</span>
                <span *ngIf="!project.endDate && project.status === 'ongoing'"> - Ongoing</span>
              </span>
            </div>

            <div class="project-description" *ngIf="project.description">
              <p [class.expanded]="expandedDescriptions[i]">{{ project.description }}</p>
              <button class="expand-btn" 
                      *ngIf="project.description && project.description.length > 300"
                      (click)="toggleDescription(i)">
                {{ expandedDescriptions[i] ? 'Show Less' : 'Read More' }}
              </button>
            </div>

            <!-- Project Tags -->
            <div class="project-tags" *ngIf="hasItems(project.tags)">
              <span *ngFor="let tag of project.tags" class="tag">{{ tag }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- No Research Section -->
      <div class="no-research-section" *ngIf="filteredProjects.length === 0 && researchProjects.length > 0">
        <div class="no-research-icon">
          <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
        </div>
        <h2>No Research Projects Found</h2>
        <p>No projects match your current search criteria. Try adjusting your filters or search terms.</p>
      </div>

      <div class="no-research-section" *ngIf="researchProjects.length === 0">
        <div class="no-research-icon">
          <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M9 11H1v6h8v-6zM23 11h-8v6h8v-6z"/>
            <path d="M15 7V1H9v6h6z"/>
          </svg>
        </div>
        <h2>Research Portfolio Coming Soon</h2>
        <p>Mathematical research projects and collaborations will be showcased here. Check back soon for updates on current and past research endeavors.</p>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-section" *ngIf="loading">
    <div class="loading-content">
      <div class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading research projects...</p>
      </div>
    </div>
  </div>
</div>